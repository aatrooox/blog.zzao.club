---
date: 2024-08-18
lastmod: 2025-08-19
title: ã€contentlayerã€‘å…¼å®¹ä¸åŒçš„mdæ–‡ä»¶metadataçš„å­—æ®µ
showTitle: ã€contentlayerã€‘å…¼å®¹ä¸åŒçš„mdæ–‡ä»¶metadataçš„å­—æ®µ
tags: ["Next"]

---
markdowné¡¶éƒ¨å¯ä»¥è®¾ç½®ä¸€ç»„å…ƒæ•°æ®ï¼Œç”¨äºè§£ææˆä½œè€…ï¼Œå‘å¸ƒæ—¥æœŸï¼Œç®€ä»‹ç­‰ä¿¡æ¯

ä½¿ç”¨è¿‡å¤šç§Markdownç¼–è¾‘å™¨ä»¥åŠå¤šç§åšå®¢æ¡†æ¶çš„äººéƒ½çŸ¥é“ï¼Œæ¯ä¸ªæ¡†æ¶ä½¿ç”¨çš„å­—æ®µæœ‰å¯èƒ½ä¸å¤ªä¸€æ ·ã€‚

æ¯”å¦‚ç®€ä»‹ã€‚æœ‰çš„ç”¨çš„æ˜¯`description`ï¼Œæœ‰çš„ç”¨çš„æ˜¯`summary`ã€‚

å¦‚æœä½ åœ¨ä¸€æ¬¾mdç¼–è¾‘å™¨ä¸­å†™å¥½äº†ä¸€ç¯‡æ–‡ç« ï¼Œè¿™ç¯‡æ–‡ç« è¢«ä½ ä½¿ç”¨Astroçš„æŸæ¨¡æ¿è¿›è¡Œå¼€å‘å’Œéƒ¨ç½²ï¼Œåé¢ä½ åˆæ¢äº†å…¶ä»–çš„æ¡†æ¶ï¼Œæ¯”å¦‚NextJSï¼Œç»“æœæ–°æ¡†æ¶ä½¿ç”¨çš„matedataæ˜¯ä¸ä¸€æ ·çš„ï¼Œè€Œä½ åˆæœ‰é‚£ä¹ˆå¤šçš„æ–‡ç« éœ€è¦æ¬è¿ã€‚è¿™æ— ç–‘æ˜¯ä¸€ä»¶å¾ˆå¤´ç–¼çš„äº‹ã€‚

è™½ç„¶ä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜ï¼Œå¯ä»¥è‡ªå·±å†™ä¸€ä¸ªè„šæœ¬ï¼Œæ‰¹é‡çš„æŠŠmatadataä¿®æ”¹ä¸€ä¸‹ï¼Œå†æ”¾åœ¨æŸä¸€ä¸ªæ–‡ä»¶å¤¹å†…ï¼Œä½†è¿™å°±æ˜æ˜¾ä¼šé€ æˆä¸€ç§å¿ƒæ™ºè´Ÿæ‹…ï¼šå¾ˆå¿«ä½ å°±ä¼šæ··æ·†ï¼Œä¸€ç¯‡æ–‡ç« çš„ç®€ä»‹åˆ°åº•è¯¥å†™`desc`ï¼Œè¿˜æ˜¯`description`ï¼Œè¿˜æ˜¯`summary`ã€‚

æ‰€ä»¥ï¼Œæˆ‘å¸Œæœ›å¯ä»¥æ˜¯ä¸å…³å¿ƒæ–‡ç« çš„ç®€ä»‹ç”¨ä»€ä¹ˆå­—æ®µè¡¨ç¤ºï¼Œåªç®¡å†™æ–‡ç« å°±å¥½äº†ã€‚

äºæ˜¯ä¹ï¼Œæˆ‘å°±è°ƒç ”äº†ä¸€ä¸‹`contentlayer`çš„æ–‡æ¡£ï¼ŒæŠŠè‡ªå·±æ‰‹å¤´çš„æ¨¡æ¿ç¨ç¨æ”¹åŠ¨ä¸€ä¸‹ï¼Œç”¨æ¥æ”¯æŒå¤šç§å­—æ®µè¡¨ç¤ºåŒä¸€ä¸ªä¿¡æ¯

æˆ‘ç›®å‰åœ¨ç”¨çš„`NextJS`åšå®¢æ¨¡æ¿æ˜¯`Tailwind Nextjs Starter Blog`ï¼Œæ‰€ä»¥æˆ‘ä»¥è¿™ä¸ªä¸ºä¾‹

åœ¨`contentlayer.config.ts`ä¸­ï¼Œæœ‰ä¸€ä¸ª`computedFields`çš„é…ç½®

å‡å¦‚æˆ‘æœ‰äº›æ–‡ç« å‘å¸ƒæ—¶æœŸç”¨çš„ `date`ï¼Œ æœ‰äº›ç”¨çš„ `published`ï¼Œé‚£å°±å¯ä»¥è¿™æ ·é…ç½®

```typescript
const computedFields: ComputedFields = {
    // ...
    showDate: {
        type: 'date',
        resolve: (doc) => doc.date || doc.published,
    }
}
```

åŒæ—¶ï¼Œåœ¨Filedsé‡ŒåŠ å…¥è¿™ä¸¤ç§å­—æ®µ

```typescript
export const Blog = defineDocumentType(() => ({
    name: 'Blog',
    filePathPattern: 'blog/**/*.mdx',
    contentType: 'mdx',
    fields: {
        title: { type: 'string', required: true },
        date: { type: 'date', required: true },
        published: { type: 'date', required: false },
        // ...
    },
    computedFields: {
        // ...
    },
}))
```

ç„¶åå†å»ä¿®æ”¹dateçš„æ–‡ä»¶é‡Œï¼Œå¯ä»¥è¾¹çœ‹é¡µé¢è¾¹è°ƒè¯•

- æŠŠç›¸åº”çš„ `post.date` æ”¹ä¸º `post.showDate` 
- æŠŠ `const { date } = post` æ”¹ä¸º `const { showDate } = post`
- ç„¶åå†æŠŠ`date`æ’å…¥çš„å†…å®¹å¤„ï¼Œæ›¿æ¢ä¸º`showDate`å³å¯

**ç¡®ä¿æ›¿æ¢å®Œ**ä¸Šè¿°å†…å®¹ä¹‹åï¼Œä½ å°±å¯ä»¥éšæ„åœ¨å…¶ä»–mdç¼–è¾‘å™¨ä¸­ä½¿ç”¨ä½ è®¾ç½®å¥½çš„å¤šç§å­—æ®µäº†

æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿å’¨è¯¢ã€‚

ğŸ‘‹ğŸ»ğŸ‘‹ğŸ»
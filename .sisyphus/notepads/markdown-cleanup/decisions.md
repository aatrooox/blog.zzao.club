# 问题和决策记录

## 遇到的问题

### 1. YAML 解析复杂性
**问题**：简单的 YAML 解析容易出错
**解决方案**：使用正则表达式直接定位 `tags:` 和 `versions:` 字段，避免完整 YAML 解析
**收获**：对于简单结构化数据，正则表达式往往比完整解析器更可靠

### 2. 版本优先级判断
**问题**：如何在多个版本中智能选择最核心的 3 个？
**解决方案**：建立三级优先级规则（高/中/低）
- 高优先级：主框架（nuxt/vue/react 等）
- 中优先级：核心工具（node/bun/typescript 等）
- 低优先级：其他所有

**应用**：对文件进行优先级排序，保留最高的 3 个

### 3. 文章主题保留
**问题**：版本优先级规则可能过于机械化
**解决方案**：考虑文章的核心主题
- 如果某个版本是文章的核心内容（如 WSL），应该优先保留
- 然后才选择中优先级的工具

**收获**：规则应该灵活，需要考虑上下文

## 重要决策

### 决策 1：草稿文件处理
**决策**：跳过以 `-` 开头的文件
**理由**：
- 这些是未发布的草稿
- 修改草稿会改变其意图
- 任务要求明确跳过

**结果**：17 个文件被安全跳过，无误报

### 决策 2：版本优先级标准
**决策**：建立三级优先级制度
**理由**：
- 需要客观标准判断哪些版本重要
- 主框架应该优先保留（项目生态）
- 核心工具次之（开发效率）
- 其他库最后（配置工具）

**结果**：成功应用于实际案例

### 决策 3：保留最核心版本
**决策**：对于 `migrate-macos-to-windows-wsl.md` 保留 `WSL@2`
**理由**：
- 虽然是低优先级，但是文章的核心主题
- 其他版本都是围绕 WSL 环境的配置工具
- 移除 WSL@2 会损失关键信息

**结果**：修复质量更高，保留了文章价值

## 未来改进点

### 1. 自动化规则
- 考虑建立可配置的优先级规则文件
- 支持项目级别的定制化优先级

### 2. 智能选择
- 分析文章标题和正文，自动识别核心技术
- 结合内容频率统计

### 3. 版本管理
- 考虑版本号本身的重要性
- 主版本 vs 次版本的区别

### 4. 工具链集成
- 创建 pre-commit hook 自动检查
- 集成到 CI/CD 流程
- 支持 linting 规则配置

## 学习总结

### 关键经验
1. **灵活运用正则表达式**：对于结构化文本检查，比完整解析器更高效
2. **建立清晰规则**：通过分类制度确保决策的一致性和可维护性
3. **保留上下文**：规则再好也要考虑实际使用场景
4. **全量验证**：修复后的全面检查确保没有遗漏

### 代码质量建议
- 使用类型系统明确数据结构
- 添加日志记录便于调试
- 编写测试用例确保正确性
- 文档化规则标准
